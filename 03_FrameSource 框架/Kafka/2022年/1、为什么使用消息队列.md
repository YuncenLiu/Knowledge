> 2022-11-10

假设有这样一个场景，一个订单服务

当用户下单后，后台需要执行 `数据库创建订单`、`商品库存减一`、`用户加积分`、`给用户发优惠券` 这样一系列操作。



但随着同步的方式进行，可能会造成系统的开销过大，而且同步过程中要保证每个服务都顺利的执行完，整个链路才可以执行完，因为网络等原因，成功率会受影响，导致用户体验较差，所以就需要异步的一个消息队列方式。

异步优势：

+ 明显提升系统吞吐量
+ 及时服务失败，也可以通过分布式事务保证最终是成功的

针对同步的通信方式来说，异步的方式，可以让上游快速成功，极大的提高了系统的吞吐量，而且在分布式系统中，通过下游多个分布式事务的保障，也可以保障业务执行之后的最终一致性。



> 消息队列具体解决的问题——通信问题

