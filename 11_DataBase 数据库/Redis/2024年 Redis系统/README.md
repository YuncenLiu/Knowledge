
1. [Redis 持久化技术有哪些？](./1.5、数据持久化.md)
2. [Redis AOF持久化方式，有哪些策略？](./1.5、数据持久化.md#AOF)
3. [Redis 同时开启 AOF 和 RDB 时，会加载哪个？](/1.5、数据持久化.md#RDB和AOF共存)
4. [如何优化频繁往返造成的性能瓶颈？](./1.7、管道.md)
5. [主从复制的原理以及工作流程？](./1.9、Redis复制.md#主从复制的原理以及工作流程？)
6. [哨兵的运行流程和选举原理？](./1.10、Redis哨兵.md# 哨兵的运行流程和选举原理？)
7. [Redis到底是多线程还是单线程？](./1.13、Redis高阶面试题.md# Redis是多线程还是单线程？)
8. IO多路复用？
9. Redis为什么这么快？
10. 海量数据里查询某个固定前缀的key
11. 如何生产上限制 `keys *` `flushdb ` `flushall `这种危险命令
12. memory usage 命令用过吗？
13. BigKey问题，多大算Big，你如何发现，如何删除，如何处理
14. BigKey做过调优吗？惰性释放lazyfree了解过吗？
15. Morekey问题，生产上Redis数据库有 1000W记录，你如何遍历? `keys *` 可以吗
16. Redis和MySQL双写100%会出纰漏，做到强一致性，如何保证最终一致性？



### 2.7、Redis官方分布式锁

1. [生产上你们的 Redis 内存设置多少？](./2.7、大厂面试题.md#Redis默认多少内存可用)
2. [如何配置、修改 Redis 的内存大小](./2.7、大厂面试题.md#Redis默认多少内存可用)
3. 如果内存满了，你怎么办
4. redis 清理内容的方式，定期删除和惰性删除了解过吗？
5. redis 缓存淘汰策略有哪些？分别是什么？你用那个？
6. redis 的 LRU 了解过吗？手写 LRU
7. [LRU 和 LFU 的区别是什么](./2.7、大厂面试题.md#LRU 和 LFU 的区别是什么)



1. Redis 项目里面怎么用，redis 的数据结构都有哪些？布隆过滤器怎么用
2. Redis 的多路 io 复用如何理解，为什么单线程还可以抗那么高的 qps
3. Redis 的 zset 底层实现，压缩列表和跳表，这样设计的优缺点







### 项目简介

#### 微信抢红包项目 Redis 实现

需求分析

1. 100%高并发请求，不能用 MySQL 做
2. 一个总的大红包，可能会拆分成多个小红包
3. 每个人只能抢一个，需要有基数，比如100块，被拆分成10个，抢一个少一个，总数显示（10/6）直到完成。不可用重复抢
4. 需要计时，完整抢完，耗时多少
5. 红包过期，原封退回



拆分业务逻辑，实现以下单一功能

1. 发红包
   1. 使用 list 格式 `lpush redpackage:redpackageUUID 20 20 20 30 50`
2. 抢红包
   1.  Redis 天生线程安全 `LPOP redpackage:redpackageUUID` , 不加锁也能保证原子性
3. 记红包，抢成功用户
   1. 盘点 + 汇总也防止抢过的用户重新抢
   2. 使用 Hash 格式 `hset redpackage:customer:UUID cid1 20 cid2 50`  配合 `NX` 保证没有抢过再获取红包
4. 拆红包的算法



难点有

1. 拆分算法，我个人认为可以在设置红包的时候，提前将每个红包的金额分配好，避免后续抢的过程中重新计算
   1. 保证所有人抢的红包金额大致都差不多，这个看业务要求，`二倍均值法`，每次抢到的红包 = 随机区间（0, (剩余红包金额M / 剩余人数）* 2 ) 保证每次随机范围都是均值。
   2. 
2. 次数限制，每个人只能抢一次
3. 为了高并发请求，不能加锁，且需要保持原子性和数据一致



