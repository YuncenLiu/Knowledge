## Redis-数据类型

官网地址：[https://redis.io/docs/latest/develop/data-types/](https://redis.io/docs/latest/develop/data-types/)

官网命令教学：[https://redis.io/docs/latest/commands/](https://redis.io/docs/latest/commands/)

![2.10大数据类型图示.png](images/1.3%E3%80%8110%E5%A4%A7%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/2.10%E5%A4%A7%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E5%9B%BE%E7%A4%BA.png)

### String字符串

基本类型，一个key对应一个 value

是二进制安全的，可以表达任何类型，比如jpg图片、序列化对象、布尔值等

一个 redis 字符串 value 最多是 512M

```sh
127.0.0.1:6379> set string hello
OK
127.0.0.1:6379> get string
"hello"
```



### List队列

按照顺序插入，支持头插、尾插，底层是双向链表，最多包含 2^32 -1 元素（每个列表超过40亿元素）



### Hash哈希表

Redis Hash是一个string类型的field（字段）和value（值）的映射表，Hash特别适合用户存储对象。

Redis中每个Hash可以存储2^32-1个键值对（40多亿）



### Set集合

无序集合，唯一，不能重复，对象编码可以是 `inset` 或者 `hashtable`

因为是通过 哈希表实现，添加、删除、查找，时间复杂度都是 O(1) ，（40多亿）



### ZSet有序集合

也叫 sorted set 有序集合

通过 分数(srouce)进行从小到大排序，不是每个元素关联这个 double 类型，souce 可以重复



### GEO地理空间

添加地理位置的坐标、获取地理位置的坐标。计算两个位置之间的距离。

根据用户给定的经纬度坐标来获取指定范围内的地址位置集合。



### HyperLogLog基数统计

案例：统计天猫、京东访问量总数，（不重复的IP）

节约内存的前提下，尽量准确

需求：用户搜索网站关键词数量，统计某个网站UV、统计某个文章的UV，UV：独立访客，一般理解为客户端IP，需要去重考虑

```
Redis在2.8.9版本添加了HyperLogLog 结构。
Redis HyperLogLog是用来做基数统计的算法，HyperLogLog 的优点是，在输入元素的数量或者体积非常非常大时，计算基数所需的空间总是固定的、并且是很小的。
在Redis里面，每个 HyperLogLog键只需要花费12KB内存，就可以计算接近2^64个不同元素的基数。这和计算基数时，元素越多耗费
内存就越多的集合形成鲜明对比。
但是，因为HyperLogLog只会根据输入元素来计算基数，而不会储存输入元素本身，所以HyperLogLog不能像集合那样，返回输入的各个元素。
```



### bitMap位图

极具节省内存，一个字节可以存8位，但每一位只能存0或1，通过业务逻辑，假设每一位代表一个含义

0 表示没有打卡

1表示打卡了，每隔1位表示1天，那可以存非常多个人的打卡信息

场景： 适用于大多数 Boolean 存储
1. 用户是否登录过、签到功能
2. 电影、广告是否被播放过




### bitfield位域

更深入的操作底层字节

他能够将很小的证书存到一个长度较大的位图中，又或者将一个非常庞大的键分割为多个较小的键来进行存储，从而非常高效的使用内存，使得 Redis 能够得到更多不同的应用，特别是实时分析领域，

一句话：将一个 redis 字符串看作一个由二进制位组成数组并且能对变长宽位和任意没有字节对齐的指定整型域进行寻址和修改。


### Stream流

Reids Stream 是 Redis5.0以后新增数据结构

主要用于在消息队列，Redis本身就是一个Redis发布订阅（pub/sub）来实现消息队列的功能，但它有个缺点就是消息无法持久化，如果出现网络断开、Redis宕机等，消息就会被丢弃。

简单来说发布订阅（pub/sub）可以分发消息，但无法记录历史消息。

而Redis Stream提供了消息的持久化和主备复制功能，可以让任何客户端访问任何时刻的数据，并且能记住每一个客户端的访问位置，还能保证消息不丢失。