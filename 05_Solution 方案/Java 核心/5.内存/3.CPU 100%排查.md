> åˆ›å»ºäº 2021å¹´ 6æœˆ 28 æ—¥
>
> ä½œè€…ï¼š[æ•–ä¸™](https://mp.weixin.qq.com/s?__biz=MzAwNDA2OTM1Ng==&mid=2453141817&idx=1&sn=fe240865992fad11612cac08e6940f5a&scene=21#wechat_redirect)

[toc]

## æ’æŸ¥ CPU å æ»¡é—®é¢˜

### è¿æ¥ æœåŠ¡å™¨

```sh
xiang@xiaocencen ~ % ssh root@192.144.233.95
root@192.144.233.95's password:
Activate the web console with: systemctl enable --now cockpit.socket

Last failed login: Mon Jun 28 10:41:19 CST 2021 from 102.37.0.204 on ssh:notty
There were 11 failed login attempts since the last successful login.
Last login: Mon Jun 28 10:39:18 2021 from 223.104.39.66
[root@Xiang ~]#
```

### å¯èƒ½é‡åˆ°çš„é—®é¢˜

â€‹		åœ¨è¿æ¥è¿‡ç¨‹ä¸­ï¼Œå¯èƒ½ä¼šå‡ºç°çš„é—®é¢˜ï¼šæ¯”å¦‚ <span style="color:red">WARNINGï¼šREMOTE HOST IDENTIFICATION HAS CHANGED!</span>

![image-20210628104248927](images/image-20210628104248927.png)

â€‹		ssh ä¼šæŠŠè®¿é—®è¿‡è®¡ç®—æœºçš„å…¬é’¥ï¼ˆpublic keyï¼‰æ”¾åœ¨ ~/.ssh/known_hosts æ–‡ä»¶ä¸­ï¼Œå½“ä¸‹æ¬¡è®¿é—®åŒæ ·è®¡ç®—æœºæ—¶ï¼ŒOpenSSH ä¼šæ ¸å¯¹å…¬é’¥ é‡åˆ°è¿™ç§æƒ…å†µï¼Œè¦ä¹ˆç›´æ¥å¹²æ‰ <span style="color:yellow">known_hosts</span> æ–‡ä»¶ï¼Œè¦ä¹ˆè¿›å…¥åˆ°æ–‡ä»¶å†…ï¼Œåˆ æ‰å¯¹åº”çš„ IP ä¿¡æ¯

ä¹Ÿå¯ä»¥é€šè¿‡å‘½ä»¤æ¸…é™¤

```sh
ssh-keygen -R 192.144.233.95
```

ç„¶åé‡æ–°è¿æ¥ ğŸ”—

### æ’æŸ¥é—®é¢˜

â€‹		åˆ—å‡º CPU ä½¿ç”¨ç‡

```sh
top -c
```

â€‹		æŒ‰ P æŒ‰ç…§ CPUä½¿ç”¨ç‡æ’åºï¼Œæ‰¾åˆ°å ç”¨ CPU æœ€é«˜åº”ç”¨çš„ PID

```sh
top -Hp 1064317
```

<img src="images/image-20210628111419799.png" alt="image-20210628111419799" style="zoom:50%;" />

```sh
jstack -l 2916493 > ./2916493.stack
```

å¯¹çº¿ç¨‹è¿›è¡Œå¿«ç…§ï¼Œçœ‹çœ‹çº¿ç¨‹å¹²äº†ä»€ä¹ˆ

å†ä½¿ç”¨ Grep æŸ¥è¯¢çº¿ç¨‹æ–‡ä»¶. `0x2C808D` æ˜¯ 2916493 çš„åå…­è¿›åˆ¶

```sh
cat 2916493.stack | grep '0x2C808D' -C 8
```

å¯ä»¥å®šä½åˆ°å…·ä½“çš„ å¼‚å¸¸



